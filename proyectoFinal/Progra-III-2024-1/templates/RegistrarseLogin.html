<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrarse</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/styles_registrarse.css') }}">

   
    
</head>
<body class="fade-in"> <!-- A√±adido fade-in aqu√≠ -->
    <div class="login-container" id="registration-container">
        <div class="login-box">
            <div class="login-left">
                <h2>Registrarse</h2>
                <form id="registrationForm" action="/RegistrarseLogin" method="POST">
                    <div class="form-group">
                        <label for="username">Correo:</label>
                        <input type="email" id="username" name="username" required>
                        <span class="error-message" id="emailError">El correo debe ser @gmail.com</span>
                    </div>
                    <div class="form-group">
                        <label for="password">Contrase√±a:</label>
                        <div class="input-wrapper">
                            <input type="password" id="password" name="password" required>
                            <span class="toggle-password" onclick="togglePassword('password')">üëÅÔ∏è</span>
                        </div>
                        <span class="error-message" id="passwordError">La contrase√±a debe tener al menos 8 caracteres y no puede ser "12345678".</span>
                    </div>
                    <div class="form-group">
                        <label for="confirmPassword">Confirmar Contrase√±a:</label>
                        <div class="input-wrapper">
                            <input type="password" id="confirmPassword" name="confirmPassword" required>
                            <span class="toggle-password" onclick="togglePassword('confirmPassword')">üëÅÔ∏è</span>
                        </div>
                        <span class="error-message" id="confirmPasswordError">Las contrase√±as no coinciden.</span>
                    </div>
                    <div class="form-group">
                        <label for="NombreCompleto">Nombre Completo:</label>
                        <input type="text" id="NombreCompleto" name="NombreCompleto" required>
                    </div>
                    <div class="form-group">
                        <label for="NumeroTelefono">N√∫mero de Tel√©fono:</label>
                        <input type="text" id="NumeroTelefono" name="NumeroTelefono" required>
                        <span class="error-message" id="phoneError">El n√∫mero de tel√©fono debe contener exactamente 8 d√≠gitos num√©ricos y no contener letras.</span>
                    </div>
                    <div class="form-group">
                        <button type="submit">Registrarse</button>
                    </div>
                </form>
                <div class="form-footer">
                    <p>¬øYa tienes cuenta? <a href="javascript:void(0)" onclick="triggerLoginTransition()">Inicia sesi√≥n aqu√≠</a></p>
                </div>
            </div>
            <div class="login-right">
                <div class="image-frame">
                    <img src="/EllenImagen/Logo.png" alt="Registro Image" class="logo-image">
                </div>
                <p>√önete a nuestra comunidad y empieza a disfrutar de los beneficios.</p>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('registrationForm').addEventListener('submit', function(event) {
            const emailField = document.getElementById('username');
            const emailValue = emailField.value;
            const emailError = document.getElementById('emailError');

            if (!emailValue.endsWith('@gmail.com')) {
                emailError.style.display = 'block';
                event.preventDefault();
            } else {
                emailError.style.display = 'none';
            }

            const passwordField = document.getElementById('password');
            const passwordValue = passwordField.value;
            const passwordError = document.getElementById('passwordError');

            if (passwordValue.length < 8 || passwordValue === '12345678') {
                passwordError.style.display = 'block';
                event.preventDefault();
            } else {
                passwordError.style.display = 'none';
            }

            const confirmPasswordField = document.getElementById('confirmPassword');
            const confirmPasswordValue = confirmPasswordField.value;
            const confirmPasswordError = document.getElementById('confirmPasswordError');

            if (passwordValue !== confirmPasswordValue) {
                confirmPasswordError.style.display = 'block';
                event.preventDefault();
            } else {
                confirmPasswordError.style.display = 'none';
            }

            const phoneField = document.getElementById('NumeroTelefono');
            const phoneValue = phoneField.value;
            const phoneError = document.getElementById('phoneError');

            if (!/^\d{8}$/.test(phoneValue)) {
                phoneError.style.display = 'block';
                event.preventDefault();
            } else {
                phoneError.style.display = 'none';
            }
        });
        
        document.getElementById('NumeroTelefono').addEventListener('input', function() {
            const phoneField = document.getElementById('NumeroTelefono');
            const phoneValue = phoneField.value;
            const phoneError = document.getElementById('phoneError');

            if (/[^0-9]/.test(phoneValue)) {
                phoneError.textContent = 'El valor ingresado no es v√°lido. Solo se permiten n√∫meros.';
                phoneError.style.display = 'block';
            } else if (phoneValue.length !== 8) {
                phoneError.textContent = 'El n√∫mero de tel√©fono debe contener exactamente 8 d√≠gitos num√©ricos.';
                phoneError.style.display = 'block';
            } else {
                phoneError.style.display = 'none';
            }
        });

        // Funci√≥n para mostrar/ocultar contrase√±as
        function togglePassword(id) {
            const field = document.getElementById(id);
            if (field.type === 'password') {
                field.type = 'text';
            } else {
                field.type = 'password';
            }
        }

        function triggerLoginTransition() {
            const registrationContainer = document.getElementById('registration-container');

            // A√±adir clase fade-out
            registrationContainer.classList.remove('fade-in');
            registrationContainer.classList.add('fade-out');

            // Redirigir a la p√°gina de login despu√©s de la animaci√≥n
            setTimeout(() => {
                window.location.href = '/login'; // Redirigir a login
            }, 1000); // Tiempo de espera igual al de la animaci√≥n
        }
    </script>
</body>
</html>
